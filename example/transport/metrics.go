// GENERATED BY 'T'ransport 'G'enerator. DO NOT EDIT.
package transport

import (
	kitPrometheus "github.com/go-kit/kit/metrics/prometheus"
	"github.com/gofiber/adaptor/v2"
	"github.com/gofiber/fiber/v2"
	"github.com/prometheus/client_golang/prometheus/promhttp"
	"github.com/rs/zerolog"
)

var RequestCount *kitPrometheus.Counter
var RequestCountAll *kitPrometheus.Counter
var RequestLatency *kitPrometheus.Histogram

func (srv *Server) ServeMetrics(log zerolog.Logger, path string, address string) {
	srv.srvMetrics = fiber.New(fiber.Config{DisableStartupMessage: true})
	srv.srvMetrics.All(path, adaptor.HTTPHandler(promhttp.Handler()))
	go func() {
		err := srv.srvMetrics.Listen(address)
		ExitOnError(log, err, "serve metrics on "+address)
	}()
}
